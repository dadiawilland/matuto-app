{"ast":null,"code":"import _defineProperty from\"/Users/willanddadia/Documents/matuto/matuto-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/willanddadia/Documents/matuto/matuto-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{useForm,Controller}from\"react-hook-form\";import styles from'./PaymentInfo.style';import ProcessButton from'../Buttons/ProcessButton';import PaymentButton from'../Buttons/PaymentButton';import TextInput from'../TextInput/TextInput';import{useLocation}from\"react-router-dom\";import{FORM_FIELDS}from'../../constants/formConstants';import{registerAccountAction}from'../../actions/accountActions';import Register from'./Register';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PaymentInfo=function PaymentInfo(props){var dispatch=useDispatch();var location=useLocation();var _useForm=useForm({mode:'onSubmit',reValidateMode:'onSubmit'}),errors=_useForm.formState.errors,handleSubmit=_useForm.handleSubmit,control=_useForm.control,getValues=_useForm.getValues;var history=useHistory();var onSubmit=function onSubmit(data,e){// data.paymentInfoType = 1;\n// dispatch(registerAccountAction({\n//     account: location.state.account,\n//     paymentInfo: data,\n// }));\nregister(location.state.account);};var register=function register(request){var endPoint='https://matuto-api.herokuapp.com/api/account/';return fetch(endPoint,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(request)}).then(function(response){var status=response.status;var data=response.json();return Promise.all([status,data]).then(function(res){return{status:res[0],data:res[1]};});}).catch(function(error){history.push('/on-boarding');console.log(error);});};var onError=function onError(data,e){console.log(data);};return/*#__PURE__*/_jsxs(\"div\",{style:styles().containerForm,children:[/*#__PURE__*/_jsx(\"span\",{style:styles().formTitleFont,children:props.title}),/*#__PURE__*/_jsx(\"span\",{style:styles().paymentTitleFont,children:\"Payment Information\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles().containerPaymentBtnRow,children:[/*#__PURE__*/_jsx(PaymentButton,{src:'icon-creditcard.png',text:'Creditcard',style:styles().containerPaymentBtn}),/*#__PURE__*/_jsx(PaymentButton,{src:'icon-gcash.png',text:'GCash',style:styles().containerPaymentBtn})]}),/*#__PURE__*/_jsx(\"div\",{style:styles().containerInputFields,children:FORM_FIELDS.PAYMENT_INFO.map(function(formfield,i){if(formfield.subFields){return/*#__PURE__*/_jsx(\"div\",{style:styles().containerInputFieldRow,children:formfield.subFields.map(function(subFormField,ii){return/*#__PURE__*/_jsx(Controller,{control:control,name:subFormField.name,rules:subFormField.validators,defaultValue:\"\",render:function render(_ref){var _ref$field=_ref.field,onChange=_ref$field.onChange,value=_ref$field.value;return/*#__PURE__*/_jsx(TextInput,{onChange:onChange,val:value,style:_objectSpread(_objectSpread({},styles().containerInputField),styles().containerInputFieldSml),type:subFormField.type,name:subFormField.name,label:subFormField.label,error:errors[subFormField.name]});}},ii);})},i);}else{return/*#__PURE__*/_jsx(Controller,{control:control,name:formfield.name,rules:formfield.validators,render:function render(_ref2){var _ref2$field=_ref2.field,onChange=_ref2$field.onChange,value=_ref2$field.value;return/*#__PURE__*/_jsx(TextInput,{onChange:onChange,val:value,style:_objectSpread({},styles().containerInputField),type:formfield.type,name:formfield.name,label:formfield.label,error:errors[formfield.name]});}},i);}})}),props.isRegistration?null:/*#__PURE__*/_jsx(\"div\",{style:styles().containerPriceField,children:/*#__PURE__*/_jsxs(\"span\",{style:styles().priceFieldFont,children:[\"Total Amount:\",\"\\xA0\",\" 1,123 php\"]})}),/*#__PURE__*/_jsx(ProcessButton,_defineProperty({onClick:handleSubmit(onSubmit,onError),style:{paddingTop:11},isNav:false,btnLabel:\"Submit\"},\"style\",styles().containerButton))]});};export default PaymentInfo;","map":{"version":3,"sources":["/Users/willanddadia/Documents/matuto/matuto-app/src/components/Register/PaymentInfo.js"],"names":["React","useEffect","useSelector","useDispatch","useForm","Controller","styles","ProcessButton","PaymentButton","TextInput","useLocation","FORM_FIELDS","registerAccountAction","Register","useHistory","PaymentInfo","props","dispatch","location","mode","reValidateMode","errors","formState","handleSubmit","control","getValues","history","onSubmit","data","e","register","state","account","request","endPoint","fetch","method","headers","body","JSON","stringify","then","response","status","json","Promise","all","res","catch","error","push","console","log","onError","containerForm","formTitleFont","title","paymentTitleFont","containerPaymentBtnRow","containerPaymentBtn","containerInputFields","PAYMENT_INFO","map","formfield","i","subFields","containerInputFieldRow","subFormField","ii","name","validators","field","onChange","value","containerInputField","containerInputFieldSml","type","label","isRegistration","containerPriceField","priceFieldFont","paddingTop","containerButton"],"mappings":"qQAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,OAAT,CAAkBC,UAAlB,KAAoC,iBAApC,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,0BAA1B,CACA,MAAOC,CAAAA,aAAP,KAA0B,0BAA1B,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,WAAT,KAA4B,+BAA5B,CACA,OAASC,qBAAT,KAAsC,8BAAtC,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,wFAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC3B,GAAMC,CAAAA,QAAQ,CAAGd,WAAW,EAA5B,CACA,GAAMe,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CACA,aAAmEN,OAAO,CAAC,CACvEe,IAAI,CAAE,UADiE,CAEvEC,cAAc,CAAE,UAFuD,CAAD,CAA1E,CAAoBC,MAApB,UAAOC,SAAP,CAAoBD,MAApB,CAA8BE,YAA9B,UAA8BA,YAA9B,CAA4CC,OAA5C,UAA4CA,OAA5C,CAAqDC,SAArD,UAAqDA,SAArD,CAIA,GAAMC,CAAAA,OAAO,CAAGZ,UAAU,EAA1B,CAEA,GAAMa,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,IAAD,CAAOC,CAAP,CAAa,CAC1B;AACA;AACA;AACA;AACA;AACAC,QAAQ,CAACZ,QAAQ,CAACa,KAAT,CAAeC,OAAhB,CAAR,CACH,CAPD,CASA,GAAMF,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACG,OAAD,CAAa,CAC1B,GAAMC,CAAAA,QAAQ,CAAG,+CAAjB,CACA,MAAOC,CAAAA,KAAK,CAACD,QAAD,CAAW,CACnBE,MAAM,CAAE,MADW,CAEnBC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFU,CAKnBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeP,OAAf,CALa,CAAX,CAAL,CAMJQ,IANI,CAMC,SAACC,QAAD,CAAc,CAClB,GAAMC,CAAAA,MAAM,CAAGD,QAAQ,CAACC,MAAxB,CACA,GAAMf,CAAAA,IAAI,CAAGc,QAAQ,CAACE,IAAT,EAAb,CACA,MAAOC,CAAAA,OAAO,CAACC,GAAR,CAAY,CAACH,MAAD,CAASf,IAAT,CAAZ,EAA4Ba,IAA5B,CAAiC,SAACM,GAAD,QAAU,CAC9CJ,MAAM,CAAEI,GAAG,CAAC,CAAD,CADmC,CAE9CnB,IAAI,CAAEmB,GAAG,CAAC,CAAD,CAFqC,CAAV,EAAjC,CAAP,CAIH,CAbM,EAaJC,KAbI,CAaE,SAACC,KAAD,CAAU,CACfvB,OAAO,CAACwB,IAAR,CAAa,cAAb,EACAC,OAAO,CAACC,GAAR,CAAYH,KAAZ,EACH,CAhBM,CAAP,CAiBH,CAnBD,CAqBA,GAAMI,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACzB,IAAD,CAAOC,CAAP,CAAa,CACzBsB,OAAO,CAACC,GAAR,CAAYxB,IAAZ,EACH,CAFD,CAIA,mBACI,aAAK,KAAK,CAAEtB,MAAM,GAAGgD,aAArB,wBACI,aAAM,KAAK,CAAEhD,MAAM,GAAGiD,aAAtB,UAAsCvC,KAAK,CAACwC,KAA5C,EADJ,cAEI,aAAM,KAAK,CAAElD,MAAM,GAAGmD,gBAAtB,iCAFJ,cAGI,aAAK,KAAK,CAAEnD,MAAM,GAAGoD,sBAArB,wBACI,KAAC,aAAD,EAAe,GAAG,CAAE,qBAApB,CAA2C,IAAI,CAAE,YAAjD,CAA+D,KAAK,CAAEpD,MAAM,GAAGqD,mBAA/E,EADJ,cAEI,KAAC,aAAD,EAAe,GAAG,CAAE,gBAApB,CAAsC,IAAI,CAAE,OAA5C,CAAqD,KAAK,CAAErD,MAAM,GAAGqD,mBAArE,EAFJ,GAHJ,cAOI,YAAK,KAAK,CAAErD,MAAM,GAAGsD,oBAArB,UACKjD,WAAW,CAACkD,YAAZ,CAAyBC,GAAzB,CAA6B,SAACC,SAAD,CAAYC,CAAZ,CAAkB,CAC5C,GAAID,SAAS,CAACE,SAAd,CAAyB,CACrB,mBACI,YAAa,KAAK,CAAE3D,MAAM,GAAG4D,sBAA7B,UACKH,SAAS,CAACE,SAAV,CAAoBH,GAApB,CAAwB,SAACK,YAAD,CAAeC,EAAf,CAAsB,CAC3C,mBACI,KAAC,UAAD,EAEI,OAAO,CAAE5C,OAFb,CAGI,IAAI,CAAE2C,YAAY,CAACE,IAHvB,CAII,KAAK,CAAEF,YAAY,CAACG,UAJxB,CAKI,YAAY,CAAC,EALjB,CAMI,MAAM,CAAE,0CACJC,KADI,CACKC,QADL,YACKA,QADL,CACeC,KADf,YACeA,KADf,oBAGJ,KAAC,SAAD,EAAW,QAAQ,CAAED,QAArB,CAA+B,GAAG,CAAEC,KAApC,CAA2C,KAAK,gCAAMnE,MAAM,GAAGoE,mBAAf,EAAuCpE,MAAM,GAAGqE,sBAAhD,CAAhD,CAAyH,IAAI,CAAER,YAAY,CAACS,IAA5I,CACI,IAAI,CAAET,YAAY,CAACE,IADvB,CAC6B,KAAK,CAAEF,YAAY,CAACU,KADjD,CACwD,KAAK,CAAExD,MAAM,CAAC8C,YAAY,CAACE,IAAd,CADrE,EAHI,EANZ,EACSD,EADT,CADJ,CAeH,CAhBA,CADL,EAAUJ,CAAV,CADJ,CAqBH,CAtBD,IAsBO,CACH,mBACI,KAAC,UAAD,EAEI,OAAO,CAAExC,OAFb,CAGI,IAAI,CAAEuC,SAAS,CAACM,IAHpB,CAII,KAAK,CAAEN,SAAS,CAACO,UAJrB,CAKI,MAAM,CAAE,6CACJC,KADI,CACKC,QADL,aACKA,QADL,CACeC,KADf,aACeA,KADf,oBAGJ,KAAC,SAAD,EAAW,QAAQ,CAAED,QAArB,CAA+B,GAAG,CAAEC,KAApC,CAA2C,KAAK,kBAAMnE,MAAM,GAAGoE,mBAAf,CAAhD,CAAqF,IAAI,CAAEX,SAAS,CAACa,IAArG,CACI,IAAI,CAAEb,SAAS,CAACM,IADpB,CAC0B,KAAK,CAAEN,SAAS,CAACc,KAD3C,CACkD,KAAK,CAAExD,MAAM,CAAC0C,SAAS,CAACM,IAAX,CAD/D,EAHI,EALZ,EACSL,CADT,CADJ,CAcH,CACJ,CAvCA,CADL,EAPJ,CAkDQhD,KAAK,CAAC8D,cAAN,CACI,IADJ,cAGK,YAAM,KAAK,CAAExE,MAAM,GAAGyE,mBAAtB,uBACG,cAAM,KAAK,CAAEzE,MAAM,GAAG0E,cAAtB,2BAAoD,MAApD,gBADH,EArDb,cAyDI,KAAC,aAAD,kBAAe,OAAO,CAAEzD,YAAY,CAACI,QAAD,CAAW0B,OAAX,CAApC,CAAyD,KAAK,CAAE,CAAC4B,UAAU,CAAE,EAAb,CAAhE,CAAkF,KAAK,CAAE,KAAzF,CAAgG,QAAQ,CAAC,QAAzG,UAAyH3E,MAAM,GAAG4E,eAAlI,EAzDJ,GADJ,CA6DH,CAxGD,CA0GA,cAAenE,CAAAA,WAAf","sourcesContent":["import React, { useEffect } from 'react'\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useForm, Controller } from \"react-hook-form\";\nimport styles from './PaymentInfo.style'\nimport ProcessButton from '../Buttons/ProcessButton'\nimport PaymentButton from '../Buttons/PaymentButton'\nimport TextInput from '../TextInput/TextInput'\nimport { useLocation } from \"react-router-dom\";\nimport { FORM_FIELDS } from '../../constants/formConstants';\nimport { registerAccountAction } from '../../actions/accountActions';\nimport Register from './Register';\nimport { useHistory } from 'react-router-dom';\n\nconst PaymentInfo = (props) => {\n    const dispatch = useDispatch();\n    const location = useLocation();\n    const {formState: { errors }, handleSubmit, control, getValues } = useForm({\n        mode: 'onSubmit', \n        reValidateMode: 'onSubmit'\n    });\n    const history = useHistory();\n\n    const onSubmit = (data, e) => {\n        // data.paymentInfoType = 1;\n        // dispatch(registerAccountAction({\n        //     account: location.state.account,\n        //     paymentInfo: data,\n        // }));\n        register(location.state.account)\n    }\n\n    const register = (request) => {\n        const endPoint = 'https://matuto-api.herokuapp.com/api/account/';\n        return fetch(endPoint, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            }, \n            body: JSON.stringify(request)\n        }).then((response) => {\n            const status = response.status;\n            const data = response.json();\n            return Promise.all([status, data]).then((res) => ({\n                status: res[0],\n                data: res[1],\n            }));\n        }).catch((error) =>{\n            history.push('/on-boarding')\n            console.log(error);\n        });\n    };\n\n    const onError = (data, e) => {\n        console.log(data);\n    }\n\n    return (\n        <div style={styles().containerForm}>\n            <span style={styles().formTitleFont}>{props.title}</span>\n            <span style={styles().paymentTitleFont}>Payment Information</span>\n            <div style={styles().containerPaymentBtnRow}>\n                <PaymentButton src={'icon-creditcard.png'} text={'Creditcard'} style={styles().containerPaymentBtn}/>\n                <PaymentButton src={'icon-gcash.png'} text={'GCash'} style={styles().containerPaymentBtn}/>\n            </div>\n            <div style={styles().containerInputFields}>\n                {FORM_FIELDS.PAYMENT_INFO.map((formfield, i) => {\n                    if (formfield.subFields) {\n                        return (\n                            <div key={i} style={styles().containerInputFieldRow}>\n                                {formfield.subFields.map((subFormField, ii) => {\n                                    return (\n                                        <Controller\n                                            key={ii}\n                                            control={control}\n                                            name={subFormField.name}\n                                            rules={subFormField.validators}\n                                            defaultValue=\"\"\n                                            render={({\n                                                field: { onChange, value  }\n                                                }) => \n                                                <TextInput onChange={onChange} val={value} style={{...styles().containerInputField, ...styles().containerInputFieldSml}} type={subFormField.type} \n                                                    name={subFormField.name} label={subFormField.label} error={errors[subFormField.name]}/>\n                                            }\n                                        />\n                                    );\n                                })}\n                            </div>\n                        );\n                    } else {\n                        return (        \n                            <Controller\n                                key={i}\n                                control={control}\n                                name={formfield.name}\n                                rules={formfield.validators}\n                                render={({\n                                    field: { onChange, value }\n                                    }) => \n                                    <TextInput onChange={onChange} val={value} style={{...styles().containerInputField}} type={formfield.type} \n                                        name={formfield.name} label={formfield.label} error={errors[formfield.name]}/>\n                                }\n                            />\n                        );\n                    }\n                })}\n            </div>\n            {\n                props.isRegistration ?\n                    null\n                :\n                    (<div  style={styles().containerPriceField}>\n                        <span style={styles().priceFieldFont}>Total Amount:{'\\u00A0'} 1,123 php</span>\n                    </div>)\n            }\n            <ProcessButton onClick={handleSubmit(onSubmit, onError)} style={{paddingTop: 11}} isNav={false} btnLabel=\"Submit\" style={styles().containerButton}/>\n        </div>\n    )\n}\n\nexport default PaymentInfo "]},"metadata":{},"sourceType":"module"}